"use strict";define("forum/login",[],function(){var e={};e.init=function(){var n=$("#login-error-notify");var s=$("#login");var r=$("#login-form");s.on("click",function(e){e.preventDefault();if(!$("#username").val()||!$("#password").val()){n.find("p").translateText("[[error:invalid-username-or-password]]");n.show()}else{n.hide();if(s.hasClass("disabled")){return}s.addClass("disabled");app.flags=app.flags||{};app.flags._sessionRefresh=true;r.ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},success:function(e){var n=utils.urlToLocation(e).pathname;var s=utils.params({url:e});s.loggedin=true;var r=decodeURIComponent($.param(s));window.location.href=n+"?"+r},error:function(e){if(e.status===403&&e.responseText==="Forbidden"){window.location.href=config.relative_path+"/login?error=csrf-invalid"}else{n.find("p").translateText(e.responseText);n.show();s.removeClass("disabled");app.flags._sessionRefresh=false;if($("#password:focus").length){$("#password").select()}}}})}});$("#login-error-notify button").on("click",function(e){e.preventDefault();n.hide();return false});if($("#content #username").attr("readonly")){$("#content #password").val("").focus()}else{$("#content #username").focus()}$("#content #noscript").val("false")};return e});
//# sourceMappingURL=public/src/client/login.js.map