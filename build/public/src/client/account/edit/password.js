"use strict";define("forum/account/edit/password",["forum/account/header","translator","zxcvbn"],function(a,e,d){var s={};s.init=function(){a.init();r()};function r(){var e=$("#inputCurrentPassword");var s=$("#password-notify");var a=$("#password-confirm-notify");var r=$("#inputNewPassword");var i=$("#inputNewPasswordAgain");var n=false;var t=false;function o(){var a=d(r.val());n=false;if(r.val().length<ajaxify.data.minimumPasswordLength){u(s,"[[user:change_password_error_length]]")}else if(!utils.isPasswordValid(r.val())){u(s,"[[user:change_password_error]]")}else if(r.val()===ajaxify.data.username){u(s,"[[user:password_same_as_username]]")}else if(r.val()===ajaxify.data.email){u(s,"[[user:password_same_as_email]]")}else if(a.score<ajaxify.data.minimumPasswordStrength){u(s,"[[user:weak_password]]")}else{f(s);n=true}}function l(){if(r.val()!==i.val()){u(a,"[[user:change_password_error_match]]");t=false}else{if(r.val()){f(a)}else{a.parent().removeClass("alert-success alert-danger");a.children().show();a.find(".msg").html("")}t=true}}r.on("blur",o);i.on("blur",l);$("#changePasswordBtn").on("click",function(){o();l();var s=$(this);if(n&&t){s.addClass("disabled").find("i").removeClass("hide");socket.emit("user.changePassword",{currentPassword:e.val(),newPassword:r.val(),uid:ajaxify.data.theirid},function(a){s.removeClass("disabled").find("i").addClass("hide");e.val("");r.val("");i.val("");t=false;n=false;if(a){o();l();return app.alertError(a.message)}if(parseInt(app.user.uid,10)===parseInt(ajaxify.data.uid,10)){window.location.href=config.relative_path+"/login"}else{ajaxify.go("user/"+ajaxify.data.userslug+"/edit")}})}else{if(!t){app.alertError("[[user:change_password_error_match]]")}if(!n){app.alertError("[[user:change_password_error]]")}}return false})}function u(s,a){e.translate(a,function(a){s.html(a);s.parent().removeClass("show-success").addClass("show-danger")})}function f(a){a.html("");a.parent().removeClass("show-danger").addClass("show-success")}return s});
//# sourceMappingURL=public/src/client/account/edit/password.js.map