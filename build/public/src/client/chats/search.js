"use strict";define("forum/chats/search",["components"],function(t){var e={};e.init=function(){var e=0;t.get("chat/search").on("keyup",function(){if(e){clearTimeout(e);e=0}e=setTimeout(r,250)})};function r(){var e=t.get("chat/search").val();var r=$('[component="chat/search/list"]');if(!e){return r.empty()}socket.emit("user.search",{query:e,searchBy:"username"},function(e,t){if(e){return app.alertError(e.message)}n(r,t)})}function n(r,e){r.empty();e.users=e.users.filter(function(e){return parseInt(e.uid,10)!==parseInt(app.user.uid,10)});if(!e.users.length){return r.translateHtml("<li><div><span>[[users:no-users-found]]</span></div></li>")}e.users.forEach(function(e){var t=s(r,e);a(t,e)});r.parent().toggleClass("open",true)}function s(e,t){function r(){return(t.picture?'<img src="'+t.picture+'" title="'+t.username+'" />':'<div class="user-icon" style="background-color: '+t["icon:bgColor"]+'">'+t["icon:text"]+"</div>")+'<i class="fa fa-circle status '+t.status+'"></i> '+t.username}var n=$('<li component="chat/search/user" />').attr("data-uid",t.uid).appendTo(e);n.append(r());return n}function a(e,r){e.on("click",function(){socket.emit("modules.chats.hasPrivateChat",r.uid,function(e,t){if(e){return app.alertError(e.message)}if(t){require(["forum/chats"],function(e){e.switchChat(t)})}else{app.newChat(r.uid)}})})}return e});
//# sourceMappingURL=public/src/client/chats/search.js.map