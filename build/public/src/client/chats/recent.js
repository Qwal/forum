"use strict";define("forum/chats/recent",function(){var t={};t.init=function(){require(["forum/chats"],function(t){$('[component="chat/recent"]').on("click",'[component="chat/recent/room"]',function(){t.switchChat($(this).attr("data-roomid"))});$('[component="chat/recent"]').on("scroll",function(){var t=$(this);var n=(t[0].scrollHeight-t.height())*.9;if(t.scrollTop()>n){e()}})})};function e(){var e=$('[component="chat/recent"]');if(e.attr("loading")){return}e.attr("loading",1);socket.emit("modules.chats.getRecentChats",{uid:ajaxify.data.uid,after:e.attr("data-nextstart")},function(t,n){if(t){return app.alertError(t.message)}if(n&&n.rooms.length){r(n,function(){e.removeAttr("loading");e.attr("data-nextstart",n.nextStart)})}else{e.removeAttr("loading")}})}function r(t,n){if(!t.rooms.length){return n()}app.parseAndTranslate("chats","rooms",t,function(t){$('[component="chat/recent"]').append(t);t.find(".timeago").timeago();n()})}return t});
//# sourceMappingURL=public/src/client/chats/recent.js.map