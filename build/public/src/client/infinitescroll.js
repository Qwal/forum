"use strict";define("forum/infinitescroll",function(){var e={};var c;var v=0;var u=false;var d;e.init=function(e,r){if(typeof e==="function"){c=e;d=$("body")}else{c=r;d=e||$("body")}$(window).off("scroll",o).on("scroll",o)};function o(){var e=utils.findBootstrapEnvironment();var r=(e==="xs"||e==="sm")&&$("html").hasClass("composing");if(u||r){return}var o=$(window).scrollTop();var t=$(window).height();var i=d.height()-t;var n=d.offset()?d.offset().top:0;var a=100*(o-n)/(i<=0?t:i);var f=20;var l=80;var s=o>v?1:-1;if(a<f&&o<v){c(s)}else if(a>l&&o>v){c(s)}else if(a<0&&s>0&&i<0){c(s)}v=o}e.loadMore=function(e,r,o){if(u){return}u=true;var t={method:e,data:r};$(window).trigger("action:infinitescroll.loadmore",t);socket.emit(t.method,t.data,function(e,r){if(e){u=false;return app.alertError(e.message)}o(r,function(){u=false})})};e.removeExtra=function(e,r,o){if(e.length<=o){return}var t=e.length-o;if(r>0){var i=$(document).height();var n=$(window).scrollTop();e.slice(0,t).remove();$(window).scrollTop(n+($(document).height()-i))}else{e.slice(e.length-t).remove()}};return e});
//# sourceMappingURL=public/src/client/infinitescroll.js.map