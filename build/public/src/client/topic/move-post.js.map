{"version":3,"sources":["public/src/client/topic/move-post.js"],"names":["define","MovePost","openMovePostModal","button","app","parseAndTranslate","html","dialog","bootbox","title","message","show","buttons","submit","label","className","callback","topicIdEl","find","val","movePost","parents","attr","on","post","pid","tid","socket","emit","err","alertError","fadeOut","remove","alertSuccess"],"mappings":"AAAA,aAGAA,OAAO,2BAA6B,WACnC,IAAIC,KAEJA,EAASC,kBAAoB,SAAUC,GACtCC,IAAIC,kBAAkB,8BAAgC,SAAUC,GAC/D,IAAIC,EAASC,QAAQD,QACpBE,MAAO,sBACPC,QAASJ,EACTK,KAAM,KACNC,SACCC,QACCC,MAAO,yBACPC,UAAW,yBACXC,SAAU,WACT,IAAIC,EAAYV,EAAOW,KAAK,YAC5B,IAAKD,EAAUE,MAAO,CACrB,OAGDC,EAASjB,EAAOkB,QAAQ,cAAelB,EAAOkB,QAAQ,cAAcC,KAAK,YAAaL,EAAUE,MAAO,WACtGF,EAAUE,IAAI,WAMnBZ,EAAOW,KAAK,eAAeI,KAAK,WAAY,MAE5Cf,EAAOW,KAAK,YAAYK,GAAG,eAAgB,WAC1ChB,EAAOW,KAAK,eAAeI,KAAK,YAAaf,EAAOW,KAAK,YAAYC,YAKxE,SAASC,EAASI,EAAMC,EAAKC,EAAKV,GACjCW,OAAOC,KAAK,kBAAoBH,IAAKA,EAAKC,IAAKA,GAAO,SAAUG,GAC/D,GAAIA,EAAK,CACRzB,IAAI0B,WAAWD,EAAInB,SACnB,OAAOM,IAGRQ,EAAKO,QAAQ,IAAK,WACjBP,EAAKQ,WAGN5B,IAAI6B,aAAa,wBACjBjB,MAKF,OAAOf","file":"public/src/client/topic/move-post.js","sourcesContent":["'use strict';\n\n\ndefine('forum/topic/move-post', [], function () {\n\tvar MovePost = {};\n\n\tMovePost.openMovePostModal = function (button) {\n\t\tapp.parseAndTranslate('partials/move_post_modal', {}, function (html) {\n\t\t\tvar dialog = bootbox.dialog({\n\t\t\t\ttitle: '[[topic:move_post]]',\n\t\t\t\tmessage: html,\n\t\t\t\tshow: true,\n\t\t\t\tbuttons: {\n\t\t\t\t\tsubmit: {\n\t\t\t\t\t\tlabel: '[[topic:confirm_move]]',\n\t\t\t\t\t\tclassName: 'btn-primary submit-btn',\n\t\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\t\tvar topicIdEl = dialog.find('#topicId');\n\t\t\t\t\t\t\tif (!topicIdEl.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmovePost(button.parents('[data-pid]'), button.parents('[data-pid]').attr('data-pid'), topicIdEl.val(), function () {\n\t\t\t\t\t\t\t\ttopicIdEl.val('');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.find('.submit-btn').attr('disabled', true);\n\n\t\t\tdialog.find('#topicId').on('keyup change', function () {\n\t\t\t\tdialog.find('.submit-btn').attr('disabled', !dialog.find('#topicId').val());\n\t\t\t});\n\t\t});\n\t};\n\n\tfunction movePost(post, pid, tid, callback) {\n\t\tsocket.emit('posts.movePost', { pid: pid, tid: tid }, function (err) {\n\t\t\tif (err) {\n\t\t\t\tapp.alertError(err.message);\n\t\t\t\treturn callback();\n\t\t\t}\n\n\t\t\tpost.fadeOut(500, function () {\n\t\t\t\tpost.remove();\n\t\t\t});\n\n\t\t\tapp.alertSuccess('[[topic:post_moved]]');\n\t\t\tcallback();\n\t\t});\n\t}\n\n\n\treturn MovePost;\n});\n"]}