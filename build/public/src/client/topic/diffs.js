"use strict";define("forum/topic/diffs",["forum/topic/images","benchpress","translator"],function(s,n,i){var r={};r.open=function(a){var e={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};socket.emit("posts.getDiffs",{pid:a},function(t,o){if(t){return app.alertError(t.message)}n.parse("partials/modals/post_history",{diffs:o.map(function(t){t=parseInt(t,10);return{timestamp:t,pretty:new Date(t).toLocaleString(config.userLang.replace("_","-"),e)}}),numDiffs:o.length},function(t){i.translate(t,function(t){var e=bootbox.dialog({title:"[[topic:diffs.title]]",message:t,size:"large"});if(!o.length){return}var n=e.find("select");var s=e.find("ul.posts-list");n.on("change",function(){r.load(a,this.value,s)});e.on("shown.bs.modal",function(){r.load(a,n.val(),s)})})})})};r.load=function(t,e,n){socket.emit("posts.showPostAt",{pid:t,since:e},function(t,e){if(t){return app.alertError(t.message)}e.deleted=!!parseInt(e.deleted,10);app.parseAndTranslate("partials/posts_list","posts",{posts:[e]},function(t){n.empty().append(t);s.unloadImages(t);s.loadImages()})})};return r});
//# sourceMappingURL=public/src/client/topic/diffs.js.map