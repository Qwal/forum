"use strict";define("forum/topic/delete-posts",["components","postSelect"],function(e,i){var t={};var n;var o;var s;t.init=function(){$(".topic").on("click",'[component="topic/delete/posts"]',c);$(window).on("action:ajaxify.start",a)};function a(){p();$(window).off("action:ajaxify.start",a)}function c(){app.parseAndTranslate("partials/delete_posts_modal",{},function(t){n=t;$("body").append(n);o=n.find("#delete_posts_confirm");s=n.find("#purge_posts_confirm");n.find(".close,#delete_posts_cancel").on("click",p);i.init(function(){l();r()});r();o.on("click",function(){d(o,"posts.deletePosts")});s.on("click",function(){d(s,"posts.purgePosts")})})}function d(e,t){e.attr("disabled",true);socket.emit(t,{tid:ajaxify.data.tid,pids:i.pids},function(t){e.removeAttr("disabled");if(t){return app.alertError(t.message)}p()})}function r(){if(i.pids.length){n.find("#pids").translateHtml("[[topic:fork_pid_count, "+i.pids.length+"]]")}else{n.find("#pids").translateHtml("[[topic:fork_no_pids]]")}}function l(){if(i.pids.length){o.removeAttr("disabled");s.removeAttr("disabled")}else{o.attr("disabled",true);s.attr("disabled",true)}}function p(){i.pids.forEach(function(t){e.get("post","pid",t).toggleClass("bg-success",false)});if(n){n.remove();n=null}e.get("topic").off("click","[data-pid]");i.enableClicksOnPosts()}return t});
//# sourceMappingURL=public/src/client/topic/delete-posts.js.map