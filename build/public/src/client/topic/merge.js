"use strict";define("forum/topic/merge",function(){var t={};var o;var e;var i={};t.init=function(){$(".category").on("click",'[component="topic/merge"]',n)};function n(){if(o){return}app.parseAndTranslate("partials/merge_topics_modal",{},function(t){o=t;$("body").append(o);e=o.find("#merge_topics_confirm");o.find(".close,#merge_topics_cancel").on("click",p);$('[component="category"]').on("click",'[component="category/topic"] a',r);a();e.on("click",function(){c(e)})})}function r(t){var n=$(this).parents('[component="category/topic"]').attr("data-tid");socket.emit("topics.getTopic",n,function(t,e){if(t){return app.alertError(t)}var o=e?e.title:"No title";if(i[n]){delete i[n]}else{i[n]=o}s();a()});t.preventDefault();t.stopPropagation();return false}function c(e){e.attr("disabled",true);var o=Object.keys(i);socket.emit("topics.merge",o,function(t){e.removeAttr("disabled");if(t){return app.alertError(t.message)}ajaxify.go("/topic/"+o[0]);p()})}function a(){var t=Object.keys(i);t.sort(function(t,e){return t-e});var e=t.map(function(t){return{tid:t,title:i[t]}});if(t.length){app.parseAndTranslate("partials/merge_topics_modal","topics",{topics:e},function(t){o.find(".topics-section").html(t)})}else{o.find(".topics-section").translateHtml("[[error:no-topics-selected]]")}}function s(){if(Object.keys(i).length){e.removeAttr("disabled")}else{e.attr("disabled",true)}}function p(){if(o){o.remove();o=null}i={};$('[component="category/topic"]').off("click","a",r)}return t});
//# sourceMappingURL=public/src/client/topic/merge.js.map