"use strict";define("forum/topic/fork",["components","postSelect"],function(e,n){var t={};var i;var c;t.init=function(){$(".topic").on("click",'[component="topic/fork"]',a);$(window).on("action:ajaxify.start",o)};function o(){d();$(window).off("action:ajaxify.start",o)}function a(){app.parseAndTranslate("partials/fork_thread_modal",{},function(t){i=t;c=i.find("#fork_thread_commit");$(document.body).append(i);i.find(".close,#fork_thread_cancel").on("click",d);i.find("#fork-title").on("keyup",r);n.init(function(){r();f()});f();c.on("click",s)})}function s(){c.attr("disabled",true);socket.emit("topics.createTopicFromPosts",{title:i.find("#fork-title").val(),pids:n.pids,fromTid:ajaxify.data.tid},function(t,i){function o(t){e.get("post","pid",t).fadeOut(500,function(){$(this).remove()})}c.removeAttr("disabled");if(t){return app.alertError(t.message)}app.alert({timeout:5e3,title:"[[global:alert.success]]",message:"[[topic:fork_success]]",type:"success",clickfn:function(){ajaxify.go("topic/"+i.slug)}});n.pids.forEach(function(t){o(t)});d()})}function f(){if(n.pids.length){i.find("#fork-pids").translateHtml("[[topic:fork_pid_count, "+n.pids.length+"]]")}else{i.find("#fork-pids").translateHtml("[[topic:fork_no_pids]]")}}function r(){if(i.find("#fork-title").val().length&&n.pids.length){c.removeAttr("disabled")}else{c.attr("disabled",true)}}function d(){n.pids.forEach(function(t){e.get("post","pid",t).toggleClass("bg-success",false)});if(i){i.remove();i=null}e.get("topic").off("click","[data-pid]");n.enableClicksOnPosts()}return t});
//# sourceMappingURL=public/src/client/topic/fork.js.map