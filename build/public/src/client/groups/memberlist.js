"use strict";define("forum/groups/memberlist",["components","forum/infinitescroll"],function(){var r={};var e;var n;var t;r.init=function(r){t=r||"groups/details";n=ajaxify.data.group.name;o();a()};function o(){$('[component="groups/members/search"]').on("keyup",function(){var r=$(this).val();if(e){clearInterval(e);e=0}e=setTimeout(function(){socket.emit("groups.searchMembers",{groupName:n,query:r},function(r,e){if(r){return app.alertError(r.message)}u(e.users,function(r){$('[component="groups/members"] tbody').html(r);$('[component="groups/members"]').attr("data-nextstart",20)})})},250)})}function a(){$('[component="groups/members"] tbody').on("scroll",function(){var r=$(this);var e=(r[0].scrollHeight-r.innerHeight())*.9;if(r.scrollTop()>e&&!$('[component="groups/members/search"]').val()){s()}})}function s(){var t=$('[component="groups/members"]');if(t.attr("loading")){return}t.attr("loading",1);socket.emit("groups.loadMoreMembers",{groupName:n,after:t.attr("data-nextstart")},function(r,e){if(r){return app.alertError(r.message)}if(e&&e.users.length){i(e.users,function(){t.removeAttr("loading");t.attr("data-nextstart",e.nextStart)})}else{t.removeAttr("loading")}})}function i(r,e){r=r.filter(function(r){return!$('[component="groups/members"] [data-uid="'+r.uid+'"]').length});u(r,function(r){$('[component="groups/members"] tbody').append(r);e()})}function u(r,e){app.parseAndTranslate(t,"group.members",{group:{members:r,isOwner:ajaxify.data.group.isOwner}},e)}return r});
//# sourceMappingURL=public/src/client/groups/memberlist.js.map