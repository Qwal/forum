"use strict";define("forum/groups/list",["forum/infinitescroll","benchpress"],function(t,o){var e={};e.init=function(){t.init(e.loadMoreGroups);$('button[data-action="new"]').on("click",function(){bootbox.prompt("[[groups:new-group.group_name]]",function(t){if(t&&t.length){socket.emit("groups.create",{name:t},function(r){if(!r){ajaxify.go("groups/"+utils.slugify(t))}else{app.alertError(r.message)}})}})});var r=utils.params();$("#search-sort").val(r.sort||"alpha");$("#search-text").on("keyup",e.search);$("#search-button").on("click",e.search);$("#search-sort").on("change",function(){ajaxify.go("groups?sort="+$("#search-sort").val())})};e.loadMoreGroups=function(r){if(r<0){return}t.loadMore("groups.loadMore",{sort:$("#search-sort").val(),after:$('[component="groups/container"]').attr("data-nextstart")},function(r,t){if(r&&r.groups.length){o.parse("partials/groups/list",{groups:r.groups},function(r){$("#groups-list").append(r);t()})}else{t()}if(r&&r.nextStart){$('[component="groups/container"]').attr("data-nextstart",r.nextStart)}})};e.search=function(){var e=$("#groups-list");var r=$("#search-text");var t=$("#search-sort");socket.emit("groups.search",{query:r.val(),options:{sort:t.val(),filterHidden:true}},function(r,t){if(r){return app.alertError(r.message)}t=t.filter(function(r){return r.name!=="registered-users"&&r.name!=="guests"});o.parse("partials/groups/list",{groups:t},function(r){e.empty().append(r)})});return false};return e});
//# sourceMappingURL=public/src/client/groups/list.js.map