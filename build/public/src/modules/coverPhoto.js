"use strict";define("coverPhoto",["vendor/jquery/draggable-background/backgroundDraggable"],function(){var n={coverEl:null,saveFn:null};n.init=function(e,r,a,o){n.coverEl=e;n.saveFn=r;e.find(".upload").on("click",a);e.find(".resize").on("click",function(){t(e)});e.find(".remove").on("click",o);e.on("dragover",n.onDragOver).on("drop",n.onDrop);e.find(".save").on("click",n.save);e.addClass("initialised")};n.onDragOver=function(e){e.stopPropagation();e.preventDefault();e.originalEvent.dataTransfer.dropEffect="copy"};n.onDrop=function(e){e.stopPropagation();e.preventDefault();var r=e.originalEvent.dataTransfer.files;var a=new FileReader;if(r.length&&r[0].type.match("image.*")){a.onload=function(e){n.coverEl.css("background-image","url("+e.target.result+")");n.newCover=e.target.result};a.readAsDataURL(r[0]);t(n.coverEl)}};function t(e){e.toggleClass("active",1).backgroundDraggable({axis:"y",units:"percent"});app.alert({alert_id:"drag_start",title:"[[modules:cover.dragging_title]]",message:"[[modules:cover.dragging_message]]",timeout:5e3})}n.save=function(){n.coverEl.addClass("saving");n.saveFn(n.newCover||undefined,n.coverEl.css("background-position"),function(e){if(!e){n.coverEl.toggleClass("active",0);n.coverEl.backgroundDraggable("disable");n.coverEl.off("dragover",n.onDragOver);n.coverEl.off("drop",n.onDrop);app.alertSuccess("[[modules:cover.saved]]")}else{app.alertError(e.message)}n.coverEl.removeClass("saving")})};return n});
//# sourceMappingURL=public/src/modules/coverPhoto.js.map