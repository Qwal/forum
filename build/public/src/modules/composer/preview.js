"use strict";define("composer/preview",function(){var a={};var t=0;a.render=function(r,o){o=o||function(){};if(t){clearTimeout(t);t=0}var e=r.find("textarea");t=setTimeout(function(){socket.emit("plugins.composer.renderPreview",e.val(),function(e,i){t=0;if(e){return}i=$(i);i.find("img:not(.not-responsive)").addClass("img-responsive");r.find(".preview").html(i);$(window).trigger("action:composer.preview");o()})},250)};a.matchScroll=function(e){var i=e.find("textarea");var r=e.find(".preview");if(i.length&&r.length){var o=i[0].scrollHeight-i.height();if(o===0){return}var t=i.scrollTop()/o;r.scrollTop(Math.max(r[0].scrollHeight-r.height(),0)*t)}};a.handleToggler=function(i){function e(){o(false);localStorage.setItem("composer:previewToggled",true)}function r(){o(true);localStorage.removeItem("composer:previewToggled")}function o(e){l.toggleClass("hide",!e);c.toggleClass("maximized",!e);t.toggleClass("hide",e);$(".write").focus();a.matchScroll(i)}var t=i.find(".write-container .toggle-preview"),n=i.find(".preview-container .toggle-preview"),l=$(".preview-container"),c=$(".write-container");n.on("click",e);t.on("click",r);if(localStorage.getItem("composer:previewToggled")){e()}else{r()}};return a});
//# sourceMappingURL=node_modules/nodebb-plugin-composer-default/static/lib/composer/preview.js.map