{"version":3,"sources":["node_modules/nodebb-plugin-composer-default/static/lib/composer/controls.js"],"names":["define","preview","controls","insertIntoTextarea","textarea","value","$textarea","$","currentVal","val","postContainer","parents","slice","selectionStart","render","wrapSelectionInTextareaWith","leading","trailing","undefined","matches","exec","selectionEnd","length","updateTextareaSelection","start","end","setSelectionRange","focus"],"mappings":"AAAA,aAIAA,OAAO,qBAAsB,oBAAqB,SAASC,GAC1D,IAAIC,KAKJA,EAASC,mBAAqB,SAASC,EAAUC,GAChD,IAAIC,EAAYC,EAAEH,GAClB,IAAII,EAAaF,EAAUG,MAC3B,IAAIC,EAAgBJ,EAAUK,QAAQ,0BAEtCL,EAAUG,IACTD,EAAWI,MAAM,EAAGR,EAASS,gBAC7BR,EACAG,EAAWI,MAAMR,EAASS,iBAG3BZ,EAAQa,OAAOJ,IAGhBR,EAASa,4BAA8B,SAASX,EAAUY,EAASC,GAClE,GAAIA,IAAaC,UAAW,CAC3BD,EAAWD,EAGZ,IAAIV,EAAYC,EAAEH,GAClB,IAAII,EAAaF,EAAUG,MAE3B,IAAIU,EAAU,yBAAyBC,KAAKZ,EAAWI,MAAMR,EAASS,eAAgBT,EAASiB,eAE/F,IAAKF,EAAQ,GAAI,CAEhBA,GAAW,KAAM,GAAIX,EAAWI,MAAMR,EAASS,eAAgBT,EAASiB,cAAe,IAGxFf,EAAUG,IACTD,EAAWI,MAAM,EAAGR,EAASS,gBAC7BM,EAAQ,GACRH,EACAG,EAAQ,GACRF,EACAE,EAAQ,GACRX,EAAWI,MAAMR,EAASiB,eAG3B,OAAQF,EAAQ,GAAGG,OAAQH,EAAQ,GAAGG,SAGvCpB,EAASqB,wBAA0B,SAASnB,EAAUoB,EAAOC,GAC5DrB,EAASsB,kBAAkBF,EAAOC,GAClClB,EAAEH,GAAUuB,SAIb,OAAOzB","file":"node_modules/nodebb-plugin-composer-default/static/lib/composer/controls.js","sourcesContent":["\"use strict\";\r\n\r\n/*global define*/\r\n\r\ndefine('composer/controls', ['composer/preview'], function(preview) {\r\n\tvar controls = {};\r\n\r\n\t/*************************************************/\r\n\t/* Rich Textarea Controls                        */\r\n\t/*************************************************/\r\n\tcontrols.insertIntoTextarea = function(textarea, value) {\r\n\t\tvar $textarea = $(textarea);\r\n\t\tvar currentVal = $textarea.val();\r\n\t\tvar postContainer = $textarea.parents('[component=\"composer\"]');\r\n\r\n\t\t$textarea.val(\r\n\t\t\tcurrentVal.slice(0, textarea.selectionStart) +\r\n\t\t\tvalue +\r\n\t\t\tcurrentVal.slice(textarea.selectionStart)\r\n\t\t);\r\n\r\n\t\tpreview.render(postContainer);\r\n\t};\r\n\r\n\tcontrols.wrapSelectionInTextareaWith = function(textarea, leading, trailing){\r\n\t\tif (trailing === undefined) {\r\n\t\t\ttrailing = leading;\r\n\t\t}\r\n\r\n\t\tvar $textarea = $(textarea);\r\n\t\tvar currentVal = $textarea.val();\r\n\r\n\t\tvar matches = /^(\\s*)([\\s\\S]*?)(\\s*)$/.exec(currentVal.slice(textarea.selectionStart, textarea.selectionEnd));\r\n\r\n\t\tif (!matches[2]) {\r\n\t\t\t// selection is entirely whitespace\r\n\t\t\tmatches = [null, '', currentVal.slice(textarea.selectionStart, textarea.selectionEnd), ''];\r\n\t\t}\r\n\r\n\t\t$textarea.val(\r\n\t\t\tcurrentVal.slice(0, textarea.selectionStart) +\r\n\t\t\tmatches[1] +\r\n\t\t\tleading +\r\n\t\t\tmatches[2] +\r\n\t\t\ttrailing +\r\n\t\t\tmatches[3] +\r\n\t\t\tcurrentVal.slice(textarea.selectionEnd)\r\n\t\t);\r\n\r\n\t\treturn [matches[1].length, matches[3].length];\r\n\t};\r\n\r\n\tcontrols.updateTextareaSelection = function(textarea, start, end){\r\n\t\ttextarea.setSelectionRange(start, end);\r\n\t\t$(textarea).focus();\r\n\t};\r\n\r\n\r\n\treturn controls;\r\n});\r\n"]}