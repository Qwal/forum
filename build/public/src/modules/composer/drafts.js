"use strict";define("composer/drafts",function(){var a={};var i;var t=false;a.init=function(e,t){var r=e.find("textarea");r.on("keyup",function(){o();i=setTimeout(function(){n(e,t)},1e3)})};function o(){if(i){clearTimeout(i);i=0}}a.getDraft=function(e){return localStorage.getItem(e)};function n(e,t){var r;if(f()&&t&&t.save_id&&e.length){r=e.find("textarea").val();if(r.length){localStorage.setItem(t.save_id,r)}else{a.removeDraft(t.save_id)}}}a.removeDraft=function(e){o();a.updateVisibility("available",e);a.updateVisibility("open",e);return localStorage.removeItem(e)};a.updateVisibility=function(e,t,r){if(!f()){return}try{var a=localStorage.getItem("drafts:"+e);a=a?JSON.parse(a):[]}catch(e){console.warn("[composer/drafts] Could not read list of open drafts");var a=[]}var i=a.indexOf(t);if(r&&i===-1){a.push(t)}else if(!r&&i!==-1){a.splice(i,1)}localStorage.setItem("drafts:"+e,JSON.stringify(a))};function f(){if(t){return t}try{localStorage.setItem("test","test");localStorage.removeItem("test");t=true;return true}catch(e){t=false;return false}}return a});
//# sourceMappingURL=node_modules/nodebb-plugin-composer-default/static/lib/composer/drafts.js.map