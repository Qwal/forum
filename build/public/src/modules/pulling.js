(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e():typeof define==="function"&&define.amd?define("pulling",e):t.Pulling=e()})(this,function(){"use strict";function e(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n];function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}function p(t,e){if(!t){throw TypeError("Invalid arguments: "+e)}}function t(){Element.prototype.matches=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;Object.entries=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})};Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})};Object.assign=Object.assign||function(t){var e=[];for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}for(var s=0,i=e;s<i.length;s++){var o=i[s];for(var r=0,a=Object.entries(o);r<a.length;r++){var u=a[r],l=u[0],h=u[1];t[l]=h}}return t};Array.prototype.includes=function t(e){return this.indexOf(e)!==-1}}var m=["linear","ease","ease-in","ease-out","ease-in-out","step-start","step-end"];var n=function(){function d(t){var e=this;this.styles={base:{menu:{},panel:{}},open:{menu:{},panel:{}},closed:{menu:{},panel:{}}};this.handlers={beforeclose:[],closed:[],beforeopen:[],opened:[],touchstart:[],touchmove:[],touchend:[]};this.state={opened:false,opening:false,closed:true,closing:false};this.disabled=false;if(!Object.values(d.modes).some(function(t){return e instanceof t})){throw TypeError("Calling this constructor is not allowed. "+"Use `Pulling.create` instead")}var n=t.menu,s=t.panel,i=t.side,o=t.mode,r=t.margin,a=t.timing,u=t.timingFunction,l=t.width,h=t.sensitivity,c=t.slope,f=t.touch;this.menu=n;this.panel=s;this.side=i||"left";this.mode=o||"drawer";this.margin=r||25,this.timing=a||200;this.timingFunction=u||"ease";this.width=l||256;this.sensitivity=h||.25;this.slope=c||.5;p(this.menu instanceof Element,"`menu` must be of type `Element`");p(this.panel instanceof Element,"`panel` must be of type `Element`");p(this.side==="left"||this.side==="right",'`side` must be equal to "left" or "right"');p(typeof this.margin==="number",'`margin` must be of type "number"');p(typeof this.timing==="number",'`timing` must be of type "number"');p(m.includes(this.timingFunction),"`timingFunction`"+" must be one of "+m.map(function(t){return'"'+t+'"'}).join(", "));p(typeof this.width==="number",'`width` must be of type "number"');p(typeof this.sensitivity==="number",'`sensitivity` must be of type "number"');p(typeof this.slope==="number",'`slope` must be of type "number"')}d.create=function(t){var e=t.mode||Object.keys(d.modes)[0]||"drawer";if(!d.modes[e]){var n=Object.keys(d.modes).map(function(t){return'"'+t+'"'}).join(", ");throw TypeError("`mode`"+" must be one of "+n)}return new d.modes[e](t)};d.prototype.emit=function(t,e){var n=this;this.handlers[t].forEach(function(t){return t.call(n,e)})};d.prototype.on=function(t,e){this.handlers[t].push(e);return this};d.prototype.off=function(t,e){if(e){this.handlers[t]=this.handlers[t].filter(function(t){return t!==e})}else{this.handlers[t]=[]}return this};d.prototype.open=function(t){var e=this;this.emit("beforeopen",t);if(this.disabled){return this}if(this.state.opened){return this}this.state.closed=false;this.state.closing=false;this.state.opening=true;this.state.opened=false;var n=this.offset();if(n>0){var s=this.timing*(1-n/this.width)+"ms";this.menu.style.transitionDuration=s;this.panel.style.transitionDuration=s}Object.assign(this.menu.style,this.styles.open.menu);Object.assign(this.panel.style,this.styles.open.panel);var i=function(){e.state.opening=false;e.state.opened=true;Object.assign(e.menu.style,e.styles.open.menu);Object.assign(e.panel.style,e.styles.open.panel);e.emit("opened")};if(n===this.width){i()}else{this.afterTransitionend(i)}return this};d.prototype.close=function(t){var e=this;this.emit("beforeclose",t);if(this.disabled){return this}if(this.state.closed){this.state.closing=false;return this}this.state.closed=false;this.state.closing=true;this.state.opening=false;this.state.opened=false;var n=this.offset();if(n>0){var s=this.timing*n/this.width+"ms";this.menu.style.transitionDuration=s;this.panel.style.transitionDuration=s}Object.assign(this.menu.style,this.styles.closed.menu);Object.assign(this.panel.style,this.styles.closed.panel);var i=function(){e.state.closing=false;e.state.closed=true;Object.assign(e.menu.style,e.styles.closed.menu);Object.assign(e.panel.style,e.styles.closed.panel);e.emit("closed")};if(n===0){i()}else{this.afterTransitionend(i)}return this};d.prototype.toggle=function(t){if(t===true){this.open()}else if(t===false){this.close()}else{this.toggle(this.state.closed||this.state.closing)}return this};d.prototype.disable=function(){this.disabled=true;return this};d.prototype.enable=function(){this.disabled=false;return this};d.prototype.afterTransitionend=function(t){};d.prototype.offset=function(){return 0};d.modes={};return d}();var s=function(n){e(t,n);function t(t){var e=n.call(this,t)||this;e.touched=false;e.ignores=[];e.ignoreSelector="";e.touch=t.touch!==false;if(e.touch){e.addTouchEvents()}return e}t.prototype.applyOffset=function(t){};t.prototype.initTouchEvents=function(){var h=this;var t=this,c=t.width,r=t.margin,a=t.side,f=t.slope,u=t.sensitivity,d=t.menu,p=t.panel;var m=a==="left"?1:-1;var v=0;var y=0;var g=0;var b=0;var E=0;var w=0;var T=0;var j=false;var e=function(t){if(h.ignoreSelector&&t.target.matches(h.ignoreSelector)){return}h.emit("touchstart",t);if(h.disabled){return}h.touched=false;if(t.touches.length!==1){return}var e=t.touches[0],n=e.clientX,s=e.clientY;var i=h.offset();var o=r+i;if(a==="left"&&n<=o||a==="right"&&window.innerWidth-n<=o){h.touched=true;v=n;y=s;g=n;b=i;w=Date.now();j=true}};var n=function(t){h.emit("touchmove",t);if(h.disabled||!h.touched){return}var e=t.touches[0],n=e.clientX,s=e.clientY;var i=(n-v)*m;if(Math.abs(i)<10){return}if(j){var o=s-y;var r=Math.abs(o/i);if(r>f){h.touched=false;return}if(h.state.closed&&i>0){h.emit("beforeopen")}else if(h.state.opened){h.emit("beforeopen")}d.style.transition=null;p.style.transition=null}if(h.state.opened&&i>0||h.state.closed&&i<0){g=n;w=Date.now();return}h.state.opened=false;h.state.closed=false;var a=(n-g)*m;var u=a>0;h.state.opening=u;h.state.closing=!u;var l=Math.min(Math.max(0,b+i),c);h.applyOffset(l);T=g;g=n;E=w;w=Date.now();j=false};var s=function(t){if(!h.touched){return}h.touched=false;if(j){return}h.emit("touchend",t);Object.assign(h.panel.style,h.styles.base.panel);Object.assign(h.menu.style,h.styles.base.menu);var e=h.offset();var n=t.changedTouches[0].clientX;var s;var i;if(n===g){s=T;i=E}else{s=g;i=w}var o=n;var r=Date.now();var a=(o-s)/(r-i)*m;if(e>c/2&&a>-u||a>u){h.open(t)}else{h.close(t)}};return{onTouchstart:e,onTouchmove:n,onTouchend:s}};t.prototype.addTouchEvents=function(){if(!this.touchEvents){this.touchEvents=this.initTouchEvents()}document.documentElement.addEventListener("touchstart",this.touchEvents.onTouchstart,false);document.documentElement.addEventListener("touchmove",this.touchEvents.onTouchmove,false);document.documentElement.addEventListener("touchend",this.touchEvents.onTouchend,false)};t.prototype.removeTouchEvents=function(){document.documentElement.removeEventListener("touchstart",this.touchEvents.onTouchstart);document.documentElement.removeEventListener("touchmove",this.touchEvents.onTouchmove);document.documentElement.removeEventListener("touchend",this.touchEvents.onTouchend)};t.prototype.ignore=function(t){this.ignores.push(t);this.ignoreSelector=this.ignores.join(", ");return this};t.prototype.unignore=function(e){this.ignores=this.ignores.filter(function(t){return t!==e});this.ignoreSelector=this.ignores.join(", ");return this};t.prototype.enableTouch=function(){if(!this.touch){this.addTouchEvents();this.touch=true}return this};t.prototype.disableTouch=function(){if(this.touch){this.removeTouchEvents();this.touch=false}return this};return t}(n);var i=function(s){e(t,s);function t(t){var e=s.call(this,t)||this;e.styles.base.menu=(n={transition:"transform "+e.timing+"ms "+e.timingFunction,overflowX:"hidden",overflowY:"auto",position:"fixed"},n[e.side]="-"+e.width+"px",n.top="0",n.bottom="0",n.width=e.width+"px",n.zIndex="1",n);e.styles.open.menu={transform:"translateX("+(e.side==="right"?"-":"")+e.width+"px)"};e.styles.closed.menu={transform:"translateX(0)"};Object.assign(e.menu.style,e.styles.base.menu,e.styles.closed.menu);Object.assign(e.panel.style,e.styles.base.panel,e.styles.closed.panel);e.initTransitionend();return e;var n}t.prototype.offset=function(){var t=this.menu.getBoundingClientRect();if(this.side==="left"){return t.left+this.width}return window.innerWidth-t.left};t.prototype.applyOffset=function(t){var e=this.side==="left"?1:-1;this.menu.style.transform="translateX("+t*e+"px)"};t.prototype.afterTransitionend=function(t){this.onTransitionend=t};t.prototype.initTransitionend=function(){var t=this;this.menu.addEventListener("transitionend",function(){if(t.onTransitionend){t.onTransitionend()}t.onTransitionend=null},false)};return t}(s);s.modes["drawer"]=i;t();return s});
//# sourceMappingURL=node_modules/pulling/build/pulling-drawer.js.map