define("emoji-dialog",["require","exports","translator","composer/controls","scrollStop","emoji"],function(e,t,r,l,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});var o=$("html");var c={open:function(e){o.addClass("emoji-insert");return e.addClass("open")},close:function(e){o.removeClass("emoji-insert");return e.removeClass("open")}};var f={people:10,nature:9,food:8,activity:7,travel:6,objects:5,symbols:4,flags:3,regional:2,modifier:1,other:0};function a(n){Promise.all([$.getJSON(s.base+"/emoji/categories.json?"+s.buster),$.getJSON(s.base+"/emoji/packs.json?"+s.buster)]).then(function(e){var o=e[0],t=e[1];var a=Object.keys(o).map(function(e){var t=o[e].map(function(e){return s.table[e]});return{name:e,emojis:t.map(function(e){return{name:e.name,html:s.buildEmoji(e,true)}})}}).sort(function(e,t){var o=f[e.name]||0;var a=f[t.name]||0;return a-o});window.templates.parse("partials/emoji-dialog",{categories:a,packs:t},function(e){r.translate(e,function(e){var t=$(e).appendTo("body");t.find(".emoji-tabs .nav-tabs a").click(function(e){e.preventDefault();$(e.target).tab("show")}).on("show.bs.tab",function(e){$(e.target.getAttribute("href")).find(".emoji-link img.defer").removeClass("defer").each(function(e,t){var o=$(t);var a=o.attr("data-src");o.attr("src",a)})}).first().trigger("show.bs.tab");t.modal({backdrop:false,show:false});i.apply(t.find(".tab-content")[0]);var o=function(){return c.close(t)};$(window).on("action:composer.discard action:composer.submit",o);t.find(".close").click(o);if(t.draggable){t.draggable({handle:".top-bar"})}n(t)})})})}t.init=a;function n(s){function e(e){if(e.hasClass("open")){c.close(e);return}e.off("click").on("click",".emoji-link",function(e){e.preventDefault();var t=e.currentTarget.name;var o=":"+t+": ";var a=s.selectionStart,n=s.selectionEnd;var r=n+o.length;var i=a===n?r:a;l.insertIntoTextarea(s,o);l.updateTextareaSelection(s,i,r);$(s).trigger("input")});var t=$('[data-format="emoji-add-emoji"]')[0].getBoundingClientRect();var o={bottom:"auto",top:"auto",right:"auto",left:"auto"};if(t.top>440){o.top=t.top-400+"px"}else{o.top=t.top+40+"px"}if(t.left<window.innerWidth/2){o.left=t.left+40+"px"}else{o.left=t.left-400+"px"}e.css(o);c.open(e)}var t=$("#emoji-dialog");if(t.length){e(t)}else{a(e)}}t.openForInsert=n});
//# sourceMappingURL=node_modules/nodebb-plugin-emoji/build/public/lib/emoji-dialog.js.map