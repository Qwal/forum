"use strict";define("admin/general/navigation",["translator","iconSelect","benchpress","jqueryui"],function(s,a,l){var e={};var r;e.init=function(){r=ajaxify.data.available;$("#enabled .unescape").each(function(){$(this).val(s.unescape($(this).val()))});s.translate($("#available").html(),function(a){$("#available").html(s.unescape(a)).find("li .drag-item").draggable({connectToSortable:"#active-navigation",helper:"clone",distance:10,stop:i})});$("#active-navigation").sortable().droppable({accept:$("#available li .drag-item")});$("#enabled").on("click",".iconPicker",function(){var i=$(this).find("i");a.init(i,function(a){var e=a.attr("value");var n=i.parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+n+'"] i').attr("class","fa fa-fw "+e);i.siblings('[name="iconClass"]').val(e);i.siblings(".change-icon-link").toggleClass("hidden",!!e)})});$("#active-navigation").on("click","li",n);$("#enabled").on("click",".delete",c).on("click",".toggle",o);$("#save").on("click",t)};function n(){var a=$(this).attr("data-index");$("#active-navigation li").removeClass("active");$(this).addClass("active");var e=$("#enabled").children('[data-index="'+a+'"]');$("#enabled li").addClass("hidden");if(e.length){e.removeClass("hidden")}return false}function i(a,e){var n=e.helper.attr("data-id");var i=$('#active-navigation [data-id="'+n+'"]');var t=n==="custom"?{iconClass:"fa-navicon"}:r[n];t.enabled=false;t.index=(parseInt($("#enabled").children().last().attr("data-index"),10)||0)+1;t.title=s.escape(t.title);t.text=s.escape(t.text);l.parse("admin/general/navigation","navigation",{navigation:[t]},function(a){s.translate(a,function(a){a=$(s.unescape(a));i.after(a);i.remove()})});l.parse("admin/general/navigation","enabled",{enabled:[t]},function(a){s.translate(a,function(a){a=$(s.unescape(a));$("#enabled").append(a);componentHandler.upgradeDom()})})}function t(){var r=[];var a=[];$("#active-navigation li").each(function(){a.push($(this).attr("data-index"))});a.forEach(function(a){var e=$("#enabled").children('[data-index="'+a+'"]');var n=e.find("form").serializeArray();var i={};var t={};n.forEach(function(a){if(a.name.slice(0,9)==="property:"&&a.value==="on"){t[a.name.slice(9)]=true}else{i[a.name]=s.escape(a.value)}});i.properties={};for(var l in t){if(t.hasOwnProperty(l)){i.properties[l]=t[l]}}r.push(i)});socket.emit("admin.navigation.save",r,function(a){if(a){app.alertError(a.message)}else{app.alertSuccess("Successfully saved navigation")}})}function c(){var a=$(this).parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+a+'"]').remove();$('#enabled [data-index="'+a+'"]').remove();return false}function o(){var e=$(this);var n=e.hasClass("btn-success");s.translate(n?"[[admin/general/navigation:btn.disable]]":"[[admin/general/navigation:btn.enable]]",function(a){e.toggleClass("btn-warning").toggleClass("btn-success").html(a);e.parents("li").find('[name="enabled"]').val(n?"on":"")});return false}return e});
//# sourceMappingURL=public/src/admin/general/navigation.js.map