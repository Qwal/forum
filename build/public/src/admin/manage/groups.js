"use strict";define("admin/manage/groups",["translator","benchpress"],function(t,n){var e={};var r=0;e.init=function(){var a=$("#create-modal");var r=$("#create-group-name");var t=$("#create-modal-go");var n=$("#create-modal-error");o();a.on("keypress",function(e){if(e.keyCode===13){t.click()}});$("#create").on("click",function(){a.modal("show");setTimeout(function(){r.focus()},250)});t.on("click",function(){var e={name:r.val(),description:$("#create-group-desc").val()};socket.emit("admin.groups.create",e,function(e){if(e){if(e.hasOwnProperty("message")&&utils.hasLanguageKey(e.message)){e="[[admin/manage/groups:alerts.create-failure]]"}n.translateHtml(e).removeClass("hide")}else{n.addClass("hide");r.val("");a.on("hidden.bs.modal",function(){ajaxify.refresh()});a.modal("hide")}})});$(".groups-list").on("click","button[data-action]",function(){var e=$(this);var a=e.attr("data-action");var r=e.parents("tr[data-groupname]").attr("data-groupname");switch(a){case"delete":bootbox.confirm("[[admin/manage/groups:alerts.confirm-delete]]",function(e){if(e){socket.emit("groups.delete",{groupName:r},function(e){if(e){return app.alertError(e.message)}ajaxify.refresh()})}});break}})};function o(){var e=$("#group-search");function a(){if(!e.val()){return ajaxify.refresh()}$(".pagination").addClass("hide");var r=$(".groups-list");socket.emit("groups.search",{query:e.val(),options:{sort:"date"}},function(e,a){if(e){return app.alertError(e.message)}n.parse("admin/manage/groups","groups",{groups:a},function(e){t.translate(e,function(e){r.find("[data-groupname]").remove();r.find("tr").after(e)})})})}e.on("keyup",function(){if(r){clearTimeout(r);r=0}r=setTimeout(a,200)})}return e});
//# sourceMappingURL=public/src/admin/manage/groups.js.map