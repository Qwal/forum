"use strict";define("admin/extend/rewards",["translator","benchpress"],function(t,r){var a={};var s;var n;var i;var d;a.init=function(){s=ajaxify.data.rewards;n=ajaxify.data.active;i=ajaxify.data.conditions;d=ajaxify.data.conditionals;$("[data-selected]").each(function(){e($(this))});$("#active").on("change","[data-selected]",function(){c($(this))}).on("click",".delete",function(){var a=$(this).parents("[data-id]");var e=a.attr("data-id");socket.emit("admin.rewards.delete",{id:e},function(a){if(a){app.alertError(a.message)}else{app.alertSuccess("[[admin/extend/rewards:alert.delete-success]]")}});a.remove();return false}).on("click",".toggle",function(){var a=$(this);var e=a.hasClass("btn-success");a.toggleClass("btn-warning").toggleClass("btn-success").translateHtml("[[admin/extend/rewards:"+(e?"disable":"enable")+"]]");return false});$("#new").on("click",f);$("#save").on("click",u);o()};function e(a){a.val(a.attr("data-selected"));switch(a.attr("name")){case"rid":l(a);break}}function c(a){a.attr("data-selected",a.val());switch(a.attr("name")){case"rid":l(a);break}}function l(a){var e=a.parents("[data-rid]");var t=e.find(".inputs");var r;var n="";for(var i in s){if(s.hasOwnProperty(i)){if(s[i].rid===a.attr("data-selected")){r=s[i].inputs;e.attr("data-rid",s[i].rid);break}}}if(!r){return app.alertError("[[admin/extend/rewards:alert.no-inputs-found]] "+a.attr("data-selected"))}r.forEach(function(a){n+='<label for="'+a.name+'">'+a.label+"<br />";switch(a.type){case"select":n+='<select name="'+a.name+'">';a.values.forEach(function(a){n+='<option value="'+a.value+'">'+a.name+"</option>"});break;case"text":n+='<input type="text" name="'+a.name+'" />';break}n+="</label><br />"});t.html(n)}function o(){$("[data-rid]").each(function(a){var e=$(this).find(".inputs");var t=n[a].rewards;for(var r in t){if(t.hasOwnProperty(r)){e.find('[name="'+r+'"]').val(t[r])}}})}function f(){var e=$("#active");var a={active:[{disabled:true,value:"",claimable:1,rid:null,id:null}],conditions:i,conditionals:d,rewards:s};r.parse("admin/extend/rewards","active",a,function(a){t.translate(a,function(a){a=$(a);e.append(a);a.find("select").val("")})})}function u(){var r=[];$("#active li").each(function(){var e={rewards:{}};var a=$(this).find("form.main").serializeArray();var t=$(this).find("form.rewards").serializeArray();a.forEach(function(a){e[a.name]=a.value});t.forEach(function(a){e.rewards[a.name]=a.value});e.id=$(this).attr("data-id");e.disabled=$(this).find(".toggle").hasClass("btn-success");r.push(e)});socket.emit("admin.rewards.save",r,function(a){if(a){app.alertError(a.message)}else{app.alertSuccess("[[admin/extend/rewards:alert.save-success]]")}})}return a});
//# sourceMappingURL=public/src/admin/extend/rewards.js.map