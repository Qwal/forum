"use strict";define("admin/appearance/themes",["translator","benchpress"],function(s,n){var e={};e.init=function(){$("#installed_themes").on("click",function(e){var t=$(e.target);var a=t.attr("data-action");if(a&&a==="use"){var n=t.parents("[data-theme]");var s=n.attr("data-type");var r=n.attr("data-css");var i=n.attr("data-theme");socket.emit("admin.themes.set",{type:s,id:i,src:r},function(e){if(e){return app.alertError(e.message)}config["theme:id"]=i;m(i);app.alert({alert_id:"admin:theme",type:"info",title:"[[admin/appearance/themes:theme-changed]]",message:"[[admin/appearance/themes:restart-to-activate]]",timeout:5e3,clickfn:function(){socket.emit("admin.restart")}})})}});$("#revert_theme").on("click",function(){bootbox.confirm("[[admin/appearance/themes:revert-confirm]]",function(e){if(e){socket.emit("admin.themes.set",{type:"local",id:"nodebb-theme-persona"},function(e){if(e){return app.alertError(e.message)}m("nodebb-theme-persona");app.alert({alert_id:"admin:theme",type:"success",title:"[[admin/appearance/themes:theme-changed]]",message:"[[admin/appearance/themes:revert-success]]",timeout:3500})})}})});socket.emit("admin.themes.getInstalled",function(e,t){if(e){return app.alertError(e.message)}var a=$("#installed_themes");if(!t.length){a.append($("<li/ >").addClass("no-themes").translateHtml("[[admin/appearance/themes:no-themes]]"))}else{n.parse("admin/partials/theme_list",{themes:t},function(e){s.translate(e,function(e){a.html(e);m(config["theme:id"])})})}})};function m(n){s.translate("[[admin/appearance/themes:select-theme]]  ||  [[admin/appearance/themes:current-theme]]",function(e){e=e.split("  ||  ");var t=e[0];var a=e[1];$("[data-theme]").removeClass("selected").find('[data-action="use"]').html(t).removeClass("btn-success").addClass("btn-primary");$('[data-theme="'+n+'"]').addClass("selected").find('[data-action="use"]').html(a).removeClass("btn-primary").addClass("btn-success")})}return e});
//# sourceMappingURL=public/src/admin/appearance/themes.js.map